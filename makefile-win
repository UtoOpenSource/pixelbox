.PHONY: pixelbox clean

include makecfg

SRCS +=  
OBJS := $(SRCS:./src/%=./wbin/%.o)
DEPS := $(OBJS:.o=.d)
FLAGS += -MMD -MP

CC  := x86_64-w64-mingw32-gcc 
CXX := x86_64-w64-mingw32-g++

pixelbox: pixelbox.exe

pixelbox.exe : $(OBJS)
	$(CC) $^ libraylib.a -o $@  $(LFLAGS) -static -static-libgcc -lm -lgdi32 -lwinmm -lpthread $(FLAGS)

./wbin/%.c.o : ./src/%.c
	mkdir -p $(dir $@)
	$(CC) -c $< -o $@ -Wall -Wextra $(FLAGS) $(INCS)

./wbin/%.cpp.o : ./src/%.cpp
	mkdir -p $(dir $@)
	$(CXX) -c $< -o $@ -Wall -Wextra $(FLAGS) $(INCS)

clean :
	rm ./wbin/*.o

-include $(DEPS)

# build raylib with this command (make shure it's static) : 
# make CC=x86_64-w64-mingw32-gcc USE_EXTERNAL_GLFW=FALSE
